<ion-header mode="ios">
  <ion-toolbar mode="ios">
    <ion-buttons slot="start" margin-start>
      <ion-button mode="ios" (click)="close()">
        <ion-icon name="close" mode="md" color="dark"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title *ngIf="id == 'locations'">Mis Direcciones</ion-title>
    <ion-title *ngIf="id == 'pickUp'">Solicitud de Recogida</ion-title>
    <ion-title *ngIf="id == 'requests'">Mis Solicitudes</ion-title>
    <ion-title *ngIf="id == 'funds'">Mis Fondos</ion-title>
    <ion-title *ngIf="id == 'withdraw'">Retirar Fondos</ion-title>
    <ion-buttons slot="end" margin-end *ngIf="id == 'locations' && !locations">
      <ion-button mode="ios" (click)="newLoc()">
        <ion-icon color="primary" name="add" color="dark" mode="md"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div class="funds" *ngIf="id == 'funds'">

    <div class="fundsTotal">

      <h1>{{funds}} €</h1>
      <span>disponible</span>
    </div>

    <ion-segment scrollable (ionChange)="segmentChanged($event)" color="primary" mode="md">
      <ion-segment-button checked value="friends" mode="md">
        <ion-label text-wrap>Todos los Movimientos</ion-label>
      </ion-segment-button>
      <ion-segment-button value="Ingresos" mode="md" disabled>
        <ion-label>Ingresos</ion-label>
      </ion-segment-button>
      <ion-segment-button value="Pagos" mode="md" disabled>
        <ion-label>Pagos</ion-label>
      </ion-segment-button>
      <ion-segment-button value="Retiradas" mode="md" disabled>
        <ion-label>Retiradas</ion-label>
      </ion-segment-button>
    </ion-segment>
  </div>


  <div class="withdraw" *ngIf="id == 'withdraw'">

    <div class="wdAcc">
      <div class="titles">
        <h4>Selecciona una cuenta</h4>
      </div>


      <ion-list class="accRow">
        <ion-radio-group>
          <div *ngFor="let acc of withdrawAcc">
            <ion-item *ngIf="withdrawAcc" class="wdAccItem" lines="none" (ionSelect)="select($event)" mode="ios">
              <i slot="start" class="wdAccIco" *ngIf="acc.accType == 'paypal'">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                  id="Capa_1" x="0px" y="0px" width="90px" height="90px" viewBox="0 0 90 90"
                  style="enable-background:new 0 0 90 90;" xml:space="preserve">
                  <g>
                    <path id="PayPal"
                      d="M58.057,0H18.649L1.189,80.146h23.124l5.664-26.558h16.521c15.803,0,29.019-9.744,32.562-26.312   C83.064,8.521,69.612,0,58.057,0z M40.816,38.242H33.28l4.953-21.924h11.326c3.885,0,6.827,2.314,7.794,5.712   c-0.496-0.086-0.956-0.235-1.498-0.235H44.53L40.816,38.242z M57.347,27.278c-1.379,5.95-7.033,10.698-12.79,10.921l2.711-12.023   h10.267C57.473,26.543,57.448,26.897,57.347,27.278z M85.355,32.754c1.326-6.211,0.711-11.275-1.086-15.306   c3.748,4.47,5.688,10.955,3.824,19.687C84.55,53.701,71.332,63.445,55.532,63.445h-16.52L33.349,90H10.223l0.96-4.381h19.428   l5.663-26.555h16.521C68.597,59.064,81.813,49.32,85.355,32.754z" />
                  </g>
                </svg>
              </i>
              <i slot="start" class="wdAccIco" *ngIf="acc.accType == 'bank'">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                  id="Capa_1" x="0px" y="0px" width="47.001px" height="47.001px" viewBox="0 0 47.001 47.001"
                  style="enable-background:new 0 0 47.001 47.001;" xml:space="preserve">
                  <g>
                    <g id="Layer_1_78_">
                      <g>
                        <path
                          d="M44.845,42.718H2.136C0.956,42.718,0,43.674,0,44.855c0,1.179,0.956,2.135,2.136,2.135h42.708     c1.18,0,2.136-0.956,2.136-2.135C46.979,43.674,46.023,42.718,44.845,42.718z" />
                        <path
                          d="M4.805,37.165c-1.18,0-2.136,0.956-2.136,2.136s0.956,2.137,2.136,2.137h37.37c1.18,0,2.136-0.957,2.136-2.137     s-0.956-2.136-2.136-2.136h-0.533V17.945h0.533c0.591,0,1.067-0.478,1.067-1.067s-0.478-1.067-1.067-1.067H4.805     c-0.59,0-1.067,0.478-1.067,1.067s0.478,1.067,1.067,1.067h0.534v19.219H4.805z M37.37,17.945v19.219h-6.406V17.945H37.37z      M26.692,17.945v19.219h-6.406V17.945H26.692z M9.609,17.945h6.406v19.219H9.609V17.945z" />
                        <path
                          d="M2.136,13.891h42.708c0.007,0,0.015,0,0.021,0c1.181,0,2.136-0.956,2.136-2.136c0-0.938-0.604-1.733-1.443-2.021     l-21.19-9.535c-0.557-0.25-1.194-0.25-1.752,0L1.26,9.808c-0.919,0.414-1.424,1.412-1.212,2.396     C0.259,13.188,1.129,13.891,2.136,13.891z" />
                      </g>
                    </g>
                  </g>
                </svg>
              </i>
              <ion-label slot="start">
                <h3><b>{{acc.accPropName}}</b></h3>
                <p *ngIf="acc.accType == 'paypal'">{{acc.accEmail}}</p>
                <p *ngIf="acc.accType == 'bank'">{{acc.accIBAN}}</p>
              </ion-label>
              <ion-radio slot="end" [value]="acc.accType" mode="ios"></ion-radio>
            </ion-item>
          </div>
        </ion-radio-group>

        <ion-item lines="none" class="wdAccItem" *ngIf="!withdrawAcc || withdrawAcc" (click)="addWdAcc()">
          <ion-icon name="add" color="dark" mode="ios" slot="start"></ion-icon>
          <ion-label slot="start">Añadir nueva Cuenta</ion-label>
        </ion-item>

      </ion-list>

    </div>

    <div class="wdValue">

      <div class="titles">
        <h4>Fondos y Retiros</h4>
      </div>

      <div class="fundsTotal">
        <ion-label *ngIf="wdValue >= fundsLimit" position="floating" color="danger">La Cantidad no puede superar los
          fondos
          disponibles.</ion-label>
        <ion-item lines="none" class="wdValueInp">
          <ion-input type="number" class="wdInp" ([ngModel])="wdValue" (ionChange)="quantity($event)"
            placeholder="0,00 €">
          </ion-input>
          <ion-icon name="logo-euro" slot="end" *ngIf="wdValue"></ion-icon>
        </ion-item>
        <span>disponible: {{funds}} €</span> <br>
        <span>después: {{fundsAfter}} €</span> <br>

      </div>


      <ion-button color="warning" class="wdBtn" (click)="withdrawFunds()">Retirar</ion-button>
    </div>



  </div>


  <div class="no-locations" *ngIf="id == 'locations' && locations == null && add != 1">
    <p>Todavía no existe ninguna dirección.</p>
  </div>

  <div class="allLocations" *ngIf="locations != null">

    <ion-item-sliding *ngFor="let loc of locations" class="locItem" lines="none" mode="ios">
      <ion-item lines="none" mode="ios">
        <ion-icon [name]="loc.icon" mode="md" slot="start"></ion-icon>
        <ion-label slot="start">
          <h3><b>{{loc.name}}</b></h3>
          <h5>{{loc.street}}, {{loc.strtNum}}</h5>
          <h5>{{loc.street2}}</h5>
          <p>{{loc.city}} {{loc.province}}</p>
        </ion-label>
        <ion-label slot="end" class="defaultTxt">
          <p *ngIf="loc.default == true" text-wrap>Por defecto</p>
        </ion-label>
      </ion-item>

      <ion-item-options side="end">
        <ion-item-option color="danger" (click)="delLoc()">Borrar</ion-item-option>
      </ion-item-options>

    </ion-item-sliding>

  </div>

  <div class="addLoc" *ngIf="!locations && add == 1">
    <ion-row no-padding>
      <ion-col size="4">
        <ion-select placeholder="Icono" (ionChange)="iconL($event)" [(ngModel)]="icon">
          <ion-select-option value="home">
            <ion-icon name="home" mode="md"></ion-icon>
          </ion-select-option>
          <ion-select-option value="briefcase">
            <ion-icon name="briefcase" mode="md"></ion-icon>
          </ion-select-option>
          <ion-select-option value="business">
            <ion-icon name="business" mode="md"></ion-icon>
          </ion-select-option>
          <ion-select-option value="beer">
            <ion-icon name="beer" mode="md"></ion-icon>
          </ion-select-option>
          <ion-select-option value="man">
            <ion-icon name="man" mode="md"></ion-icon>
          </ion-select-option>
          <ion-select-option value="school">
            <ion-icon name="school" mode="md"></ion-icon>
          </ion-select-option>
        </ion-select>
      </ion-col>
      <ion-col size="8">
        <ion-input class="inp" type="text" placeholder="Nombre para guardar" [(ngModel)]="name"></ion-input>
      </ion-col>
      <ion-col size="8">
        <ion-input class="inp" type="text" placeholder="Calle, Avenida, Barrio..." [(ngModel)]="street"></ion-input>
      </ion-col>
      <ion-col size="4">
        <ion-input class="inp" type="text" placeholder="Número" [(ngModel)]="strtNum"></ion-input>
      </ion-col>
      <ion-col size="4">
        <ion-input class="inp" type="text" placeholder="Bloque" [(ngModel)]="block"></ion-input>
      </ion-col>
      <ion-col size="8">
        <ion-input class="inp" type="text" placeholder="Planta, Piso, Puerta..." [(ngModel)]="floorDoor"></ion-input>
      </ion-col>
      <ion-col size="4">
        <ion-input class="inp" type="text" placeholder="Código Postal" [(ngModel)]="postCode"></ion-input>
      </ion-col>
      <ion-col size="4">
        <ion-input class="inp" type="text" placeholder="Ciudad" [(ngModel)]="city"></ion-input>
      </ion-col>
      <ion-col size="4">
        <ion-input class="inp" type="text" placeholder="Provincia" [(ngModel)]="province"></ion-input>
      </ion-col>
    </ion-row>
    <ion-button (click)="addLocation()">Location</ion-button>
  </div>



  <!-- PICK UP -->
  <div class="allProducts" *ngIf="products">
    <ion-list>
      <ion-radio-group>
        <div *ngFor="let item of products">
          <ion-item *ngIf="item.userID == ownID && item.status == 'paidout'" class="prodItem" lines="none"
            (ionSelect)="select($event)" mode="ios">
            <ion-radio slot="start" [value]="item.productID" mode="ios"></ion-radio>
            <ion-avatar slot="start">
              <img [src]="item.img[0]" alt="">
            </ion-avatar>
            <ion-label slot="start">
              <h3><b>{{item.title}}</b></h3>
              <p>{{item.desc}}</p>
            </ion-label>
            <ion-label slot="end" class="defaultTxt" margin-end>
              <p>{{item.date.toDate() | date: 'dd/MM'}}</p>
            </ion-label>
          </ion-item>
        </div>
      </ion-radio-group>
    </ion-list>
  </div>


</ion-content>